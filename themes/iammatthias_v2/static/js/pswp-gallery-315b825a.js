var initPhotoSwipeFromDOM=function(e){for(var t=function(e){for(var t,i,n,r,a=e.childNodes,o=a.length,l=[],d=0;d<o;d++)t=a[d],1===t.nodeType&&(i=t.children[0],void 0!==i&&(n=i.getAttribute("data-size").split("x"),mediumSize=i.getAttribute("data-medium-size").split("x"),r={originalImage:{src:i.getAttribute("href"),w:parseInt(n[0],10),h:parseInt(n[1],10)},mediumImage:{src:i.getAttribute("data-medium-url"),w:parseInt(mediumSize[0],10),h:parseInt(mediumSize[1],10)}},t.children.length>1&&(r.title=t.children[1].innerHTML),i.children.length>0,r.el=t,l.push(r)));return l},i=function e(t,i){return t&&(i(t)?t:e(t.parentNode,i))},n=function(e){e=e||window.event,e.preventDefault?e.preventDefault():e.returnValue=!1;var t=e.target||e.srcElement,n=i(t,function(e){return e.tagName&&"FIGURE"===e.tagName.toUpperCase()});if(n){for(var r,o=n.parentNode,l=n.parentNode.childNodes,d=l.length,u=0,g=0;g<d;g++)if(1===l[g].nodeType){if(l[g]===n){r=u;break}u++}return r>=0&&a(r,o),!1}},r=function(){var e=window.location.hash.substring(1),t={};if(e.length<5)return t;for(var i=e.split("&"),n=0;n<i.length;n++)if(i[n]){var r=i[n].split("=");r.length<2||(t[r[0]]=r[1])}return t.gid&&(t.gid=parseInt(t.gid,10)),t},a=function(e,i,n,r){var a,o,l,d=document.querySelectorAll(".pswp")[0];if(l=t(i),o={galleryUID:i.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(e){var t=l[e].el.getElementsByTagName("img")[0],i=window.pageYOffset||document.documentElement.scrollTop,n=t.getBoundingClientRect();return{x:n.left,y:n.top+i,w:n.width}}},r)if(o.galleryPIDs){for(var u=1;u<l.length;u++)if(l[u].pid==e){o.index=u;break}}else o.index=parseInt(e,10)-0;else o.index=parseInt(e,10)-1;if(!isNaN(o.index)){n&&(o.showAnimationDuration=0),o.showHideOpacity=!0,a=new PhotoSwipe(d,PhotoSwipeUI_Default,l,o);var g,s,m=!1,p=!0;a.listen("beforeResize",function(){g=a.viewportSize.x*window.devicePixelRatio,m&&g<1e3?(m=!1,s=!0):!m&&g>=1e3&&(m=!0,s=!0),s&&!p&&a.invalidateCurrItems(),p&&(p=!1),s=!1}),a.listen("gettingData",function(e,t){m?(t.src=t.originalImage.src,t.w=t.originalImage.w,t.h=t.originalImage.h):(t.src=t.mediumImage.src,t.w=t.mediumImage.w,t.h=t.mediumImage.h)}),a.init()}},o=document.querySelectorAll(e),l=0,d=o.length;l<d;l++)o[l].setAttribute("data-pswp-uid",l+1),o[l].onclick=n;var u=r();u.pid&&u.gid&&a(u.pid,o[u.gid-1],!0,!0)};initPhotoSwipeFromDOM(".gallery");
